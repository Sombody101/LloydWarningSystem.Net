services:
  # Main bot service
  lloyd:
    container_name: lloyd
    build: .
    volumes:
      - /mnt/AppStorage/lloyd-bot/configs:/app/configs/ # Config files
    restart: unless-stopped

  # Auto updater
  watchtower:
    image: containrrr/watchtower
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command: --interval 60

  # Repl C# Compiler
  repl-cs-compiler:
    image: ghcr.io/discord-csharp/csharprepl:latest
    restart: always
    read_only: true
    user: www-data
    environment: 
      - ASPNETCORE_URLS=http://+:31337
    ports:
      - '31337:31337'
    tmpfs:
      - /tmp
      - /var
